{% extends "base_generic.html" %}
{% block title %}Library Books{% endblock %}

{% block content %}
<h2 class="text-3xl font-semibold mb-6 text-gray-800">Library Books</h2>

<!-- Book Grid -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {% for book in books %}
    <div class="bg-white shadow-md rounded-lg p-4 hover:shadow-lg transition">
        {% if book.cover %}
            <img src="{{ book.cover.url }}" alt="{{ book.title }}" class="w-full h-48 object-cover rounded">
        {% else %}
            <div class="w-full h-48 bg-gray-200 flex items-center justify-center rounded text-gray-500">
                No Cover
            </div>
        {% endif %}
        <h3 class="mt-4 text-lg font-bold text-indigo-600">{{ book.title }}</h3>
        <p class="text-gray-600 text-sm mt-1 line-clamp-3">{{ book.description|truncatewords:20 }}</p>
    </div>
    {% endfor %}
</div>

<!-- Pagination -->
<div class="flex justify-center mt-10">
    <nav class="inline-flex rounded-md shadow-sm">
        {% if books.has_previous %}
            <a href="?page={{ books.previous_page_number }}" class="px-3 py-2 border border-gray-300 bg-white text-sm text-gray-700 hover:bg-indigo-100">Prev</a>
        {% endif %}

        {% for num in books.paginator.page_range %}
            {% if books.number == num %}
                <span class="px-3 py-2 border border-indigo-500 bg-indigo-500 text-white text-sm">{{ num }}</span>
            {% elif num > books.number|add:'-3' and num < books.number|add:'3' %}
                <a href="?page={{ num }}" class="px-3 py-2 border border-gray-300 bg-white text-sm text-gray-700 hover:bg-indigo-100">{{ num }}</a>
            {% elif num == 1 or num == books.paginator.num_pages %}
                <a href="?page={{ num }}" class="px-3 py-2 border border-gray-300 bg-white text-sm text-gray-700 hover:bg-indigo-100">{{ num }}</a>
            {% elif num == books.number|add:'-3' or num == books.number|add:'3' %}
                <span class="px-3 py-2 text-gray-500">â€¦</span>
            {% endif %}
        {% endfor %}

        {% if books.has_next %}
            <a href="?page={{ books.next_page_number }}" class="px-3 py-2 border border-gray-300 bg-white text-sm text-gray-700 hover:bg-indigo-100">Next</a>
        {% endif %}
    </nav>
</div>
{% endblock %}
